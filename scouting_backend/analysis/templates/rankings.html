{% extends "layout.html" %}

{% block head %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
{% endblock %}

{% block body %}
<div class="container">
    <h1>Rankings</h1>
    <table class="table" id="rankings_table">
        <thead>
        <tr>
            <th scope="col">Team</th>
            <th onclick="sortTable(0)">Auto Average</th>
            <th onclick="sortTable(1)">Teleop Average</th>
            <th onclick="sortTable(2)">Climb Average</th>
            <th onclick="sortTable(3)">Total Average</th>
            <th onclick="sortTable(4)">Driver Average</th>
            <th onclick="sortTable(5)">Defense Average</th>
        </tr>
        </thead>
        <tbody>
        {% for team in calculated_averages %}
        <tr class="data">
            <th scope="row">{{ team }}</th>
            <td>{{ calculated_averages[team][0] }}</td>
            <td>{{ calculated_averages[team][1] }}</td>
            <td>{{ calculated_averages[team][2] }}</td>
            <td>{{ calculated_averages[team][3] }}</td>
            <td>{{ calculated_averages[team][4] }}</td>
            <td>{{ calculated_averages[team][5] }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<script>
    var params = new URLSearchParams(window.location.search)
    if (params.get("code") == null) {
        window.location.replace(`/analysis/rankings?code=${localStorage.getItem('comp')}`)
    }
</script>
    <script src="/analysis/static/rankings.js"></script>
{% endblock %}